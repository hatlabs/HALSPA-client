{
  "name": "Micropython Project",
  "image": "micropython/unix:latest",
  "containerEnv": {
    "DEVCONTAINER": "1"
  },
  "runArgs": [
    "-e",
    "GIT_EDITOR=code --wait",
    // Docker will clean up the container and remove the file system when
    // the system exits
    "--rm",
    // -e will set environment variables
    // SSH_AUTH_SOCK is used to specify the ssh permission files
    "-eSSH_AUTH_SOCK=/run/user/1000/keyring/ssh",
    // Specify the work directory as the local workspace folder
    "-w${localWorkspaceFolder}",
    // Tell docker to use the same user as the host is using. Value should
    // match output of the command "id -u".
    "--user=1000:1000",
    "-eHOME=/home",
    // Use the same display, and network ports, as the host. (This allows
    // graphical applications, such as JFlashLite, to be launched in the
    // container environment)
    "--env=\"DISPLAY\"",
    "--hostname=Micropython",
    "--add-host=Micropython:127.0.0.1",
    "--net=host",
    // By default, docker does not allow access to the host computer's
    // devices. This option adds permission for docker to access the host
    // computer's decices, allowing utilities like JFlashLite to work
    // properly
    "--privileged"
  ],
  "customizations": {
    "vscode": {
      "extensions": [
        // Python development
        "ms-python.python",
        "ms-python.vscode-pylance",
        // Extensions recommended by vscode for C++ development
        "ms-vscode.cpptools-extension-pack",
        "ms-vscode.makefile-tools",
        // Allows user to debug ST devices, using the settings recommended in:
        // https://gitlab.pi.planetinnovation.com.au/lonsdale/firmware/code-editor-settings
        "marus25.cortex-debug",
        // Other helpful extensions
        "visualstudioexptteam.vscodeintellicode",
        "redhat.vscode-yaml",
        "esbenp.prettier-vscode",
      ]
    }
  },
  "updateRemoteUserUID": true,
  "mounts": [
    // Map user ssh settings & auth to container for git use.
    "source=${localEnv:HOME}/.ssh,target=${localEnv:HOME}/.ssh,type=bind,consistency=cached",
    // Provide USB access to container
    "type=bind,source=/dev/bus/usb,target=/dev/bus/usb",
    // Provide docker-in-docker support
    "type=bind,source=/var/run/docker.sock,target=/var/run/docker.sock",
    // Bring the local timezone into the container
    "type=bind,readonly,source=/etc/localtime,target=/etc/localtime"
  ]
}
